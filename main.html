<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ùÑÔ∏è MySnowBox | ‡∏Ñ‡∏•‡∏±‡∏á‡∏†‡∏≤‡∏û‡∏ò‡∏µ‡∏°‡∏´‡∏¥‡∏°‡∏∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Kanit', sans-serif;
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 50%, #ddeeff 100%);
            min-height: 100vh;
            color: #2c3e50;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #87ceeb 0%, #b0e0e6 50%, #f0f8ff 100%);
            padding: 20px 0;
            box-shadow: 0 4px 20px rgba(135, 206, 235, 0.3);
            margin-bottom: 30px;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .logo {
            font-size: 2.5rem;
            animation: snowfall 3s ease-in-out infinite;
        }

        .title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #1e3a8a;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.8);
        }

        @keyframes snowfall {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        /* Cards */
        .card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(135, 206, 235, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(135, 206, 235, 0.3);
        }

        .card h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: #1e40af;
            font-size: 1.3rem;
            font-weight: 600;
        }

        /* Form Controls */
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .form-group {
            flex: 1;
            min-width: 200px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
        }

        select, input[type="text"], input[type="file"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            font-family: 'Kanit', sans-serif;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }

        select:focus, input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        /* Buttons */
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-family: 'Kanit', sans-serif;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(100, 116, 139, 0.3);
        }

        .btn-add {
            background: linear-gradient(135deg, #10b981 0%, #047857 100%);
            color: white;
            padding: 8px 12px;
            font-size: 14px;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 6px 10px;
            font-size: 12px;
        }

        /* Gallery */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .gallery-item {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 6px 25px rgba(135, 206, 235, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .gallery-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 35px rgba(135, 206, 235, 0.3);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .gallery-info {
            padding: 15px;
        }

        .gallery-meta {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 10px;
        }

        .gallery-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        /* Status Messages */
        .status-message {
            padding: 12px 20px;
            border-radius: 12px;
            margin: 15px 0;
            display: none;
            align-items: center;
            gap: 10px;
        }

        .status-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .status-error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }

        /* Loader */
        .loader {
            display: none;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
        }

        .loader-snowflake {
            font-size: 2rem;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6b7280;
        }

        .empty-state .emoji {
            font-size: 4rem;
            margin-bottom: 20px;
            display: block;
        }

        /* Footer */
        .footer {
            background: rgba(255, 255, 255, 0.1);
            text-align: center;
            padding: 20px;
            margin-top: 50px;
            color: #6b7280;
            font-size: 14px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 10px;
            }

            .title {
                font-size: 1.4rem;
                text-align: center;
            }

            .form-row {
                flex-direction: column;
            }

            .form-group {
                min-width: auto;
            }

            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 15px;
            }

            .card {
                padding: 20px;
                margin-bottom: 20px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }

            .gallery {
                grid-template-columns: 1fr;
            }

            .btn {
                padding: 10px 16px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <span class="logo">‚ùÑÔ∏è</span>
                <h1 class="title">MySnowBox | ‡∏Ñ‡∏•‡∏±‡∏á‡∏†‡∏≤‡∏û‡∏ò‡∏µ‡∏°‡∏´‡∏¥‡∏°‡∏∞</h1>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- User & Category Management -->
        <div class="card">
            <h3><i data-lucide="user"></i>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h3>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="username">üë§ ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ:</label>
                    <div style="display: flex; gap: 10px;">
                        <select id="username">
                            <option value="Me">Me</option>
                        </select>
                        <button type="button" class="btn btn-add" onclick="addNewUser()">
                            <i data-lucide="plus"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="mainCategory">üìÅ ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å:</label>
                    <div style="display: flex; gap: 10px;">
                        <select id="mainCategory">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å</option>
                            <option value="‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥">‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥</option>
                            <option value="‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</option>
                            <option value="‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•">‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</option>
                        </select>
                        <button type="button" class="btn btn-add" onclick="addNewCategory('main')">
                            <i data-lucide="plus"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="subCategory">üìÇ ‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢:</label>
                    <div style="display: flex; gap: 10px;">
                        <select id="subCategory">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢</option>
                        </select>
                        <button type="button" class="btn btn-add" onclick="addNewCategory('sub')">
                            <i data-lucide="plus"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upload Section -->
        <div class="card">
            <h3><i data-lucide="upload-cloud"></i>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û</h3>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="imageFile">üñºÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏†‡∏≤‡∏û:</label>
                    <input type="file" id="imageFile" accept="image/*" multiple>
                </div>
            </div>
            
            <button type="button" class="btn btn-primary" onclick="uploadImages()">
                <i data-lucide="upload"></i>
                ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û
            </button>
            
            <div class="loader" id="loader">
                <span class="loader-snowflake">‚ùÑÔ∏è</span>
                <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î...</span>
            </div>
            
            <div class="status-message status-success" id="successMessage">
                <i data-lucide="check-circle"></i>
                <span>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</span>
            </div>
            
            <div class="status-message status-error" id="errorMessage">
                <i data-lucide="alert-circle"></i>
                <span>‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</span>
            </div>
        </div>

        <!-- Gallery Section -->
        <div class="card">
            <h3><i data-lucide="images"></i>‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏†‡∏≤‡∏û</h3>
            
            <div class="form-row">
                <div class="form-group">
                    <label>üîç ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°:</label>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <select id="filterUser">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</option>
                        </select>
                        <select id="filterMain">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å</option>
                        </select>
                        <select id="filterSub">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢</option>
                        </select>
                        <button type="button" class="btn btn-secondary" onclick="loadGallery()">
                            <i data-lucide="search"></i>
                            ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                        </button>
                    </div>
                </div>
            </div>
            
            <div id="gallery" class="gallery">
                <div class="empty-state">
                    <span class="emoji">‚õÑÔ∏è</span>
                    <h4>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢‡∏ô‡∏µ‡πâ</h4>
                    <p>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!</p>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 MySnowBox - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏û‡∏ò‡∏µ‡∏°‡∏´‡∏¥‡∏°‡∏∞ | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ ‚ù§Ô∏è ‡πÅ‡∏•‡∏∞ ‚ùÑÔ∏è</p>
        </div>
    </footer>


    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global variables
        let imageData = [];
        let categories = {
            main: ['‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥', '‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà', '‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•'],
            sub: {
                '‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥': ['‡∏†‡∏π‡πÄ‡∏Ç‡∏≤', '‡∏õ‡πà‡∏≤‡πÑ‡∏ú‡πà', '‡∏ó‡∏∞‡πÄ‡∏•'],
                '‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà': ['‡∏ß‡∏±‡∏î', '‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡∏ö‡πâ‡∏≤‡∏ô'],
                '‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•': ['‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß', '‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô', '‡∏Ñ‡∏ô‡πÅ‡∏õ‡∏•‡∏Å‡∏´‡∏ô‡πâ‡∏≤']
            }
        };

        // Load data from localStorage
        function loadLocalData() {
            // Load users
            const users = JSON.parse(localStorage.getItem('mysnowbox_users') || '["Me"]');
            const userSelect = document.getElementById('username');
            const filterUser = document.getElementById('filterUser');
            
            userSelect.innerHTML = '';
            filterUser.innerHTML = '<option value="">‡∏ó‡∏∏‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</option>';
            
            users.forEach(user => {
                userSelect.innerHTML += `<option value="${user}">${user}</option>`;
                filterUser.innerHTML += `<option value="${user}">${user}</option>`;
            });

            // Load categories
            const savedCategories = JSON.parse(localStorage.getItem('mysnowbox_categories') || '{}');
            if (Object.keys(savedCategories).length > 0) {
                categories = { ...categories, ...savedCategories };
            }
            updateCategoryOptions();

            // Load images
            imageData = JSON.parse(localStorage.getItem('mysnowbox_images') || '[]');
            loadGallery();
        }

        // Update category dropdown options
        function updateCategoryOptions() {
            const mainSelect = document.getElementById('mainCategory');
            const filterMain = document.getElementById('filterMain');
            
            mainSelect.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å</option>';
            filterMain.innerHTML = '<option value="">‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å</option>';
            
            categories.main.forEach(cat => {
                mainSelect.innerHTML += `<option value="${cat}">${cat}</option>`;
                filterMain.innerHTML += `<option value="${cat}">${cat}</option>`;
            });

            // Update subcategory when main category changes
            mainSelect.addEventListener('change', updateSubcategoryOptions);
            filterMain.addEventListener('change', updateFilterSubcategory);
        }

        function updateSubcategoryOptions() {
            const mainCat = document.getElementById('mainCategory').value;
            const subSelect = document.getElementById('subCategory');
            
            subSelect.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢</option>';
            
            if (mainCat && categories.sub[mainCat]) {
                categories.sub[mainCat].forEach(subCat => {
                    subSelect.innerHTML += `<option value="${subCat}">${subCat}</option>`;
                });
            }
        }

        function updateFilterSubcategory() {
            const mainCat = document.getElementById('filterMain').value;
            const subSelect = document.getElementById('filterSub');
            
            subSelect.innerHTML = '<option value="">‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢</option>';
            
            if (mainCat && categories.sub[mainCat]) {
                categories.sub[mainCat].forEach(subCat => {
                    subSelect.innerHTML += `<option value="${subCat}">${subCat}</option>`;
                });
            }
        }

        // Add new user
        function addNewUser() {
            const name = prompt('‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà:');
            if (name && name.trim()) {
                const users = JSON.parse(localStorage.getItem('mysnowbox_users') || '["Me"]');
                if (!users.includes(name.trim())) {
                    users.push(name.trim());
                    localStorage.setItem('mysnowbox_users', JSON.stringify(users));
                    loadLocalData();
                    showMessage('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                } else {
                    showMessage('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß', 'error');
                }
            }
        }

        // Add new category
        function addNewCategory(type) {
            if (type === 'main') {
                const name = prompt('‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏´‡∏°‡πà:');
                if (name && name.trim()) {
                    if (!categories.main.includes(name.trim())) {
                        categories.main.push(name.trim());
                        categories.sub[name.trim()] = [];
                        localStorage.setItem('mysnowbox_categories', JSON.stringify(categories));
                        updateCategoryOptions();
                        showMessage('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                    } else {
                        showMessage('‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß', 'error');
                    }
                }
            } else if (type === 'sub') {
                const mainCat = document.getElementById('mainCategory').value;
                if (!mainCat) {
                    showMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô', 'error');
                    return;
                }
                
                const name = prompt('‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà:');
                if (name && name.trim()) {
                    if (!categories.sub[mainCat]) {
                        categories.sub[mainCat] = [];
                    }
                    
                    if (!categories.sub[mainCat].includes(name.trim())) {
                        categories.sub[mainCat].push(name.trim());
                        localStorage.setItem('mysnowbox_categories', JSON.stringify(categories));
                        updateSubcategoryOptions();
                        showMessage('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                    } else {
                        showMessage('‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß', 'error');
                    }
                }
            }
        }

        // Upload images (Demo version - stores in localStorage)
        function uploadImages() {
            const username = document.getElementById('username').value;
            const mainCat = document.getElementById('mainCategory').value;
            const subCat = document.getElementById('subCategory').value;
            const fileInput = document.getElementById('imageFile');
            
            // Validation
            if (!username) {
                showMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ', 'error');
                return;
            }
            
            if (!mainCat || !subCat) {
                showMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢', 'error');
                return;
            }
            
            if (!fileInput.files.length) {
                showMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏†‡∏≤‡∏û', 'error');
                return;
            }

            showLoader(true);

            // Process files
            const files = Array.from(fileInput.files);
            let processed = 0;

            files.forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const timestamp = new Date().toISOString();
                    const imageInfo = {
                        id: Date.now() + index,
                        username: username,
                        mainCategory: mainCat,
                        subCategory: subCat,
                        url: e.target.result, // Base64 data URL for demo
                        filename: `${username}-${mainCat}-${subCat}-${Date.now()}.jpg`,
                        timestamp: timestamp,
                        uploadDate: new Date().toLocaleDateString('th-TH')
                    };
                    
                    imageData.push(imageInfo);
                    processed++;
                    
                    if (processed === files.length) {
                        localStorage.setItem('mysnowbox_images', JSON.stringify(imageData));
                        showLoader(false);
                        showMessage(`‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î ${files.length} ‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`, 'success');
                        fileInput.value = '';
                        loadGallery();
                    }
                };
                reader.readAsDataURL(file);
            });
        }

        // Load and display gallery
        function loadGallery() {
            const gallery = document.getElementById('gallery');
            const filterUser = document.getElementById('filterUser').value;
            const filterMain = document.getElementById('filterMain').value;
            const filterSub = document.getElementById('filterSub').value;
            
            // Filter images
            let filteredImages = imageData.filter(img => {
                return (!filterUser || img.username === filterUser) &&
                       (!filterMain || img.mainCategory === filterMain) &&
                       (!filterSub || img.subCategory === filterSub);
            });

            if (filteredImages.length === 0) {
                gallery.innerHTML = `
                    <div class="empty-state">
                        <span class="emoji">‚õÑÔ∏è</span>
                        <h4>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏¢‡πà‡∏≠‡∏¢‡∏ô‡∏µ‡πâ</h4>
                        <p>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!</p>
                    </div>
                `;
                return;
            }

            // Display images
            gallery.innerHTML = filteredImages.map(img => `
                <div class="gallery-item">
                    <img src="${img.url}" alt="${img.filename}" loading="lazy">
                    <div class="gallery-info">
                        <div class="gallery-meta">
                            <div><strong>üë§ ${img.username}</strong></div>
                            <div>üìÅ ${img.mainCategory} > ${img.subCategory}</div>
                            <div>üìÖ ${img.uploadDate}</div>
                        </div>
                        <div class="gallery-actions">
                            <a href="${img.url}" target="_blank" class="btn btn-secondary">
                                <i data-lucide="external-link"></i>
                                ‡πÄ‡∏õ‡∏¥‡∏î‡∏†‡∏≤‡∏û
                            </a>
                            <button onclick="deleteImage(${img.id})" class="btn btn-danger">
                                <i data-lucide="trash-2"></i>
                                ‡∏•‡∏ö
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');

            // Reinitialize icons
            lucide.createIcons();
        }

        // Delete image
        function deleteImage(imageId) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏†‡∏≤‡∏û‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                imageData = imageData.filter(img => img.id !== imageId);
                localStorage.setItem('mysnowbox_images', JSON.stringify(imageData));
                loadGallery();
                showMessage('‡∏•‡∏ö‡∏†‡∏≤‡∏û‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
            }
        }

        // Show/hide loader
        function showLoader(show) {
            document.getElementById('loader').style.display = show ? 'flex' : 'none';
        }

        // Show status message
        function showMessage(message, type) {
            const messageEl = document.getElementById(type === 'success' ? 'successMessage' : 'errorMessage');
            messageEl.querySelector('span').textContent = message;
            messageEl.style.display = 'flex';
            
            setTimeout(() => {
                messageEl.style.display = 'none';
            }, 3000);
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadLocalData();
            
            // Set up event listeners
            document.getElementById('mainCategory').addEventListener('change', updateSubcategoryOptions);
            document.getElementById('filterMain').addEventListener('change', updateFilterSubcategory);
        });
    </script>
    <script src="googlescript.js"></script>
</body>
</html>